//////////////////////////////////////////////////////////////////////

#pragma depth(disabled, write=disabled)
#pragma blend(0, enabled, src=src_alpha, dest=inv_src_alpha, op=add)

//////////////////////////////////////////////////////////////////////

#include "2D.h"

//////////////////////////////////////////////////////////////////////

Texture2D page;
sampler smplr;

//////////////////////////////////////////////////////////////////////

struct VS_INPUT
{
	float2 Position	: semantic : ();
	float2 UV		: semantic : (type=half);
	float4 Color	: semantic : (type=byte);
};

//////////////////////////////////////////////////////////////////////

struct PS_INPUT
{
	float4 Position	: SV_Position;
	float4 Color	: COLOR0;
	float2 UV		: TEXCOORD0;
	float4 Clip		: SV_ClipDistance0;
};

//////////////////////////////////////////////////////////////////////

PS_INPUT vsMain(VS_INPUT i)
{
	PS_INPUT o;
	o.Position = mul(float4(i.Position, 0, 1), TransformMatrix);
	o.Color = i.Color;
	o.UV = i.UV;
	o.Clip = DoClip(o.Position.xy);
	return o;
}

//////////////////////////////////////////////////////////////////////

float4 psMain(PS_INPUT i) : SV_TARGET
{
	float4 c = page.Sample(smplr, i.UV);
	return c * i.Color;
}
