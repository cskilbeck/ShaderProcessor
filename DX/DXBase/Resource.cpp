//////////////////////////////////////////////////////////////////////

#include "DXBase.h"

//////////////////////////////////////////////////////////////////////

namespace DX
{
	Resource::Resource()
		: data(null)
		, size(0)
	{
	}

	//////////////////////////////////////////////////////////////////////

	Resource::~Resource()
	{
	}

	//////////////////////////////////////////////////////////////////////

	WinResource::WinResource(DWORD resourceid)
		: Resource()
	{
		DXT(LoadResource(resourceid, &data, &size));
	}

	//////////////////////////////////////////////////////////////////////

	WinResource::~WinResource()
	{
		if(data != null)
		{
			FreeResource(data);
			data = null;
		}
		size = 0;
	}

	//////////////////////////////////////////////////////////////////////

	FileResource::FileResource(tchar const *filename)
		: Resource()
	{
		MemoryFile f;
		if(!LoadFile(filename, f))
		{
			throw("Error loading file");
		}
		size = f.Size();
		data = f.ptr;
		f.own = false;
	}

	//////////////////////////////////////////////////////////////////////

	FileResource::~FileResource()
	{
		Delete(data);
		size = 0;
	}
}
