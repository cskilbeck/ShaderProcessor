//////////////////////////////////////////////////////////////////////

#include "stdafx.h"

//////////////////////////////////////////////////////////////////////

namespace
{
	HANDLE outputFile;
	string shaderName;
	HLSLShader *shader;
}

//////////////////////////////////////////////////////////////////////

namespace Printer
{
	//////////////////////////////////////////////////////////////////////

	void SetHeaderFile(HANDLE f)
	{
		outputFile = f;
	}

	//////////////////////////////////////////////////////////////////////

	void SetShader(HLSLShader *s)
	{
		shader = s;
	}

	//////////////////////////////////////////////////////////////////////

	string ShaderName()
	{
		return shader->Name();
	}

	//////////////////////////////////////////////////////////////////////

	void output(char const *format, ...)
	{
		char buffer[1024];
		va_list v;
		va_start(v, format);
		int n = _vsnprintf_s(buffer, sizeof(buffer), format, v);
		DWORD wrote;
		WriteFile(outputFile, buffer, n, &wrote, null);
	}
}